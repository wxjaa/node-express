var express = require('express');
const co = require("co");
const uuid = require("uuid");
var router = express.Router();
var db = require('../utils/db.js');


//É¾³ý²Ëµ¥
router.get("/remove", function (req, res, next) {
    var id = req.query.id;
    var result={
        status:-1,
        data:null
    };
    if (id) {
        db.department.destroy({
            where: {
                departmentId: id
            }
        }).then(function (data) {
            if (data>= 1) {
                result.status=1;
                result.data=data;
            }else{
                result.status=0;
            }
            res.end(JSON.stringify(result))
        }, function (err) {
            result.data = err;
            result.state = 10;
            res.end(JSON.stringify(result));
            throw new Error(err.message);
        })
    }else{
        result.state = 10;
        res.end(JSON.stringify(result));
    }
})

//É¾³ý²Ëµ¥
router.post("/addDepartment", function (req, res, next) {

    de.department.bulkCreate().then(function() { // Notice: There are no arguments here, as of right now you'll have to...

    }).then(function(users) {
        console.log(users) // ... in order to get the array of user objects
    });
})

function getParamVal(req, varName) {
    var result;
    if (req.method == "GET") {
        result = req.query[varName];
    } else {
        result = req.body[varName];
    }
    if (result == "undefined" || result == "null" || result == undefined) {
        result = null;
    }
    return result;
}
module.exports = router;
